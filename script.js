var db = [{
        // [0] invoices
        "invoices": [

            {
                "name": "Cafe Nervosa",
                "cusId": "000001",
                "address1": "2115 E 3rd St.",
                "address2": false,
                "city": "Ocean City",
                "state": "NJ.",
                "zip": "17740",
                "date": "2021-09-28",
                "number": "5225",
                "total": 690.00,
                "stat": "Paid",
                "item1": "Single System Service; Downstairs hood, duct & fan pressure washed",
                "item2": "Second Upstairs System Cleaned on Same visit",
                "item3": false,
                "item4": false,
                "item5": false,
                "item6": false,
                "amount1": 390,
                "amount2": 200,
                "amount3": false,
                "amount4": false,
                "amount5": false,
                "amount6": false,
                "payDate": "2021-09-29",
                "method": "Credit Card",
                "notes": ""

            },
            {
                "name": "Cafe Nervosa",
                "cusId": "000001",
                "address1": "2115 E 3rd St.",
                "address2": false,
                "city": "Ocean City",
                "state": "NJ.",
                "zip": "17740",
                "date": "2021-08-22",
                "number": "5229",
                "total": 690.00,
                "stat": "Unpaid",
                "item1": "Single System Service; Downstairs hood, duct & fan pressure washed",
                "item2": "Second Upstairs System Cleaned on Same visit",
                "item3": false,
                "item4": false,
                "item5": false,
                "item6": false,
                "amount1": 390,
                "amount2": 200,
                "amount3": false,
                "amount4": false,
                "amount5": false,
                "amount6": false,
                "payDate": "",
                "method": "",
                "notes": ""

            },
            {
                "cusId": "000002",
                "name": "The Indigo Tea Shop",
                "address1": "1501 Riverwood Dr.",
                "address2": false,
                "city": "Burnsville",
                "state": "MN.",
                "zip": "55337",
                "date": "2021-09-25",
                "number": "5141",
                "total": 565.00,
                "stat": "Paid",
                "item1": "Main Cookline System Serviced; Downstairs hood, duct & fan pressure washed",
                "item2": false,
                "item3": false,
                "item4": false,
                "item5": false,
                "item6": false,
                "amount1": 565.00,
                "amount2": false,
                "amount3": false,
                "amount4": false,
                "amount5": false,
                "amount6": false,
                "payDate": "2021-09-25",
                "method": "Cash",
                "notes": ""
            },
            {
                "cusId": "000003",
                "name": "Pizza Planet",
                "address1": "745 Anchor Ave.",
                "address2": false,
                "city": "Orange Cove",
                "state": "CA.",
                "zip": "93646",
                "date": "2021-10-19",
                "number": "5138",
                "total": 585.00,
                "stat": "Paid",
                "item1": "Main Cookline System Serviced; Downstairs hood, duct & fan pressure washed",
                "item2": "Pizza Oven Hood Serviced",
                "item3": false,
                "item4": false,
                "item5": false,
                "item6": false,
                "amount1": 475.00,
                "amount2": 110.00,
                "amount3": false,
                "amount4": false,
                "amount5": false,
                "amount6": false,
                "payDate": "2021-10-20",
                "method": "",
                "notes": ""
            },
            {
                "cusId": "000004",
                "name": "Bob's Burgers",
                "address1": "115 W Ocean Dr.",
                "address2": false,
                "city": "Ocean City",
                "state": "NJ.",
                "zip": "17740",
                "date": "2021-08-12",
                "number": "5127",
                "total": 550.00,
                "stat": "Paid",
                "item1": "Main Carbroiler System Serviced; Downstairs hood, duct & fan pressure washed",
                "item2": "Fryer System Cleaned",
                "item3": false,
                "item4": false,
                "item5": false,
                "item6": false,
                "amount1": 350.00,
                "amount2": 200.00,
                "amount3": false,
                "amount4": false,
                "amount5": false,
                "amount6": false,
                "payDate": "2021-08-20",
                "method": "Cash",
                "notes": ""
            },
            {
                "cusId": "000005",
                "name": "Arnold's Drive In",
                "address1": "488 W East St.",
                "address2": false,
                "city": "Riverside",
                "state": "CA.",
                "zip": "93723",
                "date": "2021-08-11",
                "number": "5104",
                "total": 485.00,
                "stat": "Paid",
                "item1": "Cookline Kitchen Exhaust System Cleaned",
                "item2": false,
                "item3": false,
                "item4": false,
                "item5": false,
                "item6": false,
                "amount1": 485.00,
                "amount2": false,
                "amount3": false,
                "amount4": false,
                "amount5": false,
                "amount6": false,
                "payDate": "2021-08-29",
                "method": "",
                "notes": ""
            },
            {
                "cusId": "000006",
                "name": "Paunch Burger",
                "address1": "565 North Clinton Dr.",
                "address2": false,
                "city": "Pawnee",
                "state": "IN.",
                "zip": "56100",
                "date": "2021-08-11",
                "number": "5126",
                "total": 625.00,
                "stat": "Paid",
                "item1": "Main Carbroiler System Serviced; Downstairs hood, duct & fan pressure washed",
                "item2": "Fryer System Cleaned",
                "item3": false,
                "item4": false,
                "item5": false,
                "item6": false,
                "amount1": 425.00,
                "amount2": 200.00,
                "amount3": false,
                "amount4": false,
                "amount5": false,
                "amount6": false,
                "payDate": "2021-09-11",
                "method": "",
                "notes": ""
            },
            {
                "cusId": "000007",
                "name": "Central Perk",
                "address1": "565 5th Ave.",
                "address2": false,
                "city": "New York City",
                "state": "NY.",
                "zip": "10001",
                "date": "2021-08-03",
                "number": 5138,
                "total": 385.00,
                "stat": "Unpaid",
                "item1": "Bakery/Griddle Oven Hood serviced",
                "item2": false,
                "item3": false,
                "item4": false,
                "item5": false,
                "item6": false,
                "amount1": 385.00,
                "amount2": false,
                "amount3": false,
                "amount4": false,
                "amount5": false,
                "amount6": false,
                "payDate": "",
                "method": "",
                "notes": ""
            },
            {
                "cusId": "000008",
                "name": "Cheer's",
                "address1": "1501 Riverwood Dr.",
                "address2": false,
                "city": "Burnsville",
                "state": "MN.",
                "zip": "55337",
                "date": "2021-09-25",
                "number": "5121",
                "total": 565.00,
                "stat": "Unpaid",
                "item1": "Main Carbroiler System Serviced; Downstairs hood, duct & fan pressure washed",
                "item2": "Fryer System Cleaned",
                "item3": false,
                "item4": false,
                "item5": false,
                "item6": false,
                "amount1": 350.00,
                "amount2": 115.00,
                "amount3": false,
                "amount4": false,
                "amount5": false,
                "amount6": false,
                "payDate": "",
                "method": "",
                "notes": ""
            },
            {
                "CusId": "000009",
                "name": "Joe's Bar",
                "address1": "940 W Weed St.",
                "address2": false,
                "city": "Chicago",
                "state": "IL.",
                "zip": "60642",
                "date": "2021-07-23",
                "number": "5120",
                "total": 385.00,
                "stat": "Paid",
                "item1": "Single Small System Service; Downstairs hood, duct & fan pressure washed",
                "item2": false,
                "item3": false,
                "item4": false,
                "item5": false,
                "item6": false,
                "amount1": 385.00,
                "amount2": false,
                "amount3": false,
                "amount4": false,
                "amount5": false,
                "amount6": false,
                "payDate": "2021-07-25",
                "method": "Check",
                "notes": "# 7809",
            },
            {
                "cusId": "000010",
                "name": "Three Broomsticks",
                "address1": "100 Universal Plaza",
                "address2": false,
                "city": "Universal City",
                "state": "CA.",
                "zip": "91608",
                "date": "2021-07-22",
                "number": "5119",
                "total": 625.00,
                "stat": "Paid",
                "item1": "Fryer System and Cookline Serviced: Hood, Ducts & Fans",
                "item2": false,
                "item3": false,
                "item4": false,
                "item5": false,
                "item6": false,
                "amount1": 625.00,
                "amount2": false,
                "amount3": false,
                "amount4": false,
                "amount5": false,
                "amount6": false,
                "payDate": "2021-07-25",
                "method": "Check",
                "notes": "Held for 2 weeks check # 555"
            },
            {
                "cusId": "000011",
                "name": "Mos Eisley Cantina",
                "address1": "Tattoine",
                "address2": false,
                "city": "Outer Rim Territories",
                "state": false,
                "zip": false,
                "date": "2021-07-18",
                "number": "5118",
                "total": 485.00,
                "stat": "Paid",
                "item1": "Rear kitchen system serviced.",
                "item2": "Discount for assistance from in house droid staff.",
                "item3": false,
                "item4": false,
                "item5": false,
                "item6": false,
                "amount1": 585.00,
                "amount2": -100.00,
                "amount3": false,
                "amount4": false,
                "amount5": false,
                "amount6": false,
                "payDate": "2021-07-29",
                "method": "Check",
                "notes": "Rebel scum tried to pay with federation credits"
            },
            {
                "cusId": "000012",
                "name": "Krusty Crab",
                "address1": "Bikini Atoll",
                "address2": "Ocean Floor",
                "city": "Pacific Ocean",
                "state": false,
                "zip": false,
                "date": "2021-07-16",
                "number": "5116",
                "total": 385.00,
                "stat": "Paid",
                "item1": "Single System Service",
                "item2": false,
                "item3": false,
                "item4": false,
                "item5": false,
                "item6": false,
                "amount1": 385.00,
                "amount2": false,
                "amount3": false,
                "amount4": false,
                "amount5": false,
                "amount6": false,
                "payDate": "2021-07-20",
                "method": "Check",
                "notes": "Check reaks of fish smell"
            },
            {
                "cusId": "000013",
                "name": "La Ratatouille",
                "address1": "234 Main St.",
                "address2": false,
                "city": "Villanueve",
                "state": "France",
                "zip": false,
                "date": "2021-07-11",
                "number": "5114",
                "total": 485.00,
                "stat": "Paid",
                "item1": "Main Cookline Kitchen Exhaust Cleaning",
                "item2": false,
                "item3": false,
                "item4": false,
                "item5": false,
                "item6": false,
                "amount1": 485.00,
                "amount2": false,
                "amount3": false,
                "amount4": false,
                "amount5": false,
                "amount6": false,
                "payDate": "2021-06-19",
                "method": "Cash",
                "notes": "Think I saw a rat in the kitchen"
            },
            {
                "cusId": "000014",
                "name": "Frozen Banana",
                "address1": "565 Ocean Wharf Blvd.",
                "address2": false,
                "city": "Oceanside",
                "state": "CA.",
                "zip": "92003",
                "date": "2021-06-23",
                "number": "5112",
                "total": 385.00,
                "stat": "Paid",
                "item1": "Hood vent over cornballer machine serviced",
                "item2": false,
                "item3": false,
                "item4": false,
                "item5": false,
                "item6": false,
                "amount1": 385.00,
                "amount2": false,
                "amount3": false,
                "amount4": false,
                "amount5": false,
                "amount6": false,
                "payDate": "2021-07-01",
                "method": "Cash",
                "notes": ""
            },
            {
                "cusId": "000015",
                "name": "Monk's Cafe",
                "address1": "555 W. 122th St.",
                "address2": false,
                "city": "New York",
                "state": "NY.",
                "zip": "10001",
                "date": "2021-06-22",
                "number": "5111",
                "total": 625.00,
                "stat": "Paid",
                "item1": "Main Carbroiler System Serviced; Downstairs hood, duct & fan pressure washed",
                "item2": "Fryer System Cleaned",
                "item3": false,
                "item4": false,
                "item5": false,
                "item6": false,
                "amount1": 425.00,
                "amount2": 200.00,
                "amount3": false,
                "amount4": false,
                "amount5": false,
                "amount6": false,
                "payDate": "2021-06-23",
                "method": "Cash",
                "notes": ""
            },
            {
                "cusId": "000016",
                "name": "Los Pollos Hermano's",
                "address1": "9358 Eagle Ranch Rd.",
                "address2": false,
                "city": "Albuqueqe",
                "state": "NM.",
                "zip": "87114",
                "date": "2021-06-18",
                "number": "5110",
                "total": 525.00,
                "stat": "Paid",
                "item1": "Ventilation ducts over underground meth lab cleaned",
                "item2": false,
                "item3": false,
                "item4": false,
                "item5": false,
                "item6": false,
                "amount1": 525.00,
                "amount2": false,
                "amount3": false,
                "amount4": false,
                "amount5": false,
                "amount6": false,
                "payDate": "2021-06-29",
                "method": "Cash",
                "notes": "I think I saw some drug dealers hanging around the office"
            },
            {
                "cusId": "000017",
                "name": "Whistle Stop Cafe",
                "address1": "443 Mc Cracken St.",
                "address2": false,
                "city": "Juliette",
                "state": "GA.",
                "zip": "31046",
                "date": "2021-07-17",
                "number": "5109",
                "total": 555.00,
                "stat": "Paid",
                "item1": "Single Large System Serviced",
                "item2": false,
                "item3": false,
                "item4": false,
                "item5": false,
                "item6": false,
                "amount1": 555.00,
                "amount2": false,
                "amount3": false,
                "amount4": false,
                "amount5": false,
                "amount6": false,
                "payDate": "2021-06-01",
                "method": "Check",
                "notes": ""
            },
            {
                "cusId": "000018",
                "name": "Vesuvio",
                "address1": "91 Elizabeth Ave.",
                "address2": false,
                "city": "Elizabeth",
                "state": "NJ.",
                "zip": "07206",
                "date": "2021-06-15",
                "number": "5108",
                "total": 625.00,
                "stat": "Paid",
                "item1": "Main Carbroiler System Serviced; hood, duct & fan pressure washed",
                "item2": "Fryer System Cleaned",
                "item3": false,
                "item4": false,
                "item5": false,
                "item6": false,
                "item7": false,
                "item8": false,
                "item9": false,
                "amount1": 425.00,
                "amount2": 200.00,
                "amount3": false,
                "amount4": false,
                "amount5": false,
                "amount6": false,
                "payDate": "2021-06-15",
                "method": "Check",
                "notes": ""
            },
            {
                "cusId": "000019",
                "name": "The Pie Pole",
                "address1": "714 Traction Ave.",
                "address2": false,
                "city": "Los Angeles",
                "state": "CA.",
                "zip": "90013",
                "date": "2021-06-15",
                "number": "5107",
                "total": 625.00,
                "stat": "Paid",
                "item1": "Main Cookline System Serviced; hood, duct & fan pressure washed",
                "item2": "Bakery Hood Cleaned",
                "item3": false,
                "item4": false,
                "item5": false,
                "item6": false,
                "amount1": 425.00,
                "amount2": 200.00,
                "amount3": false,
                "amount4": false,
                "amount5": false,
                "amount6": false,
                "payDate": "2021-06-20",
                "method": "Cash",
                "notes": ""
            },
            {
                "cusId": "000020",
                "name": "Louie's Italian Restaurant",
                "address1": "115 W Ocean Dr.",
                "address2": false,
                "city": "Ocean City",
                "state": "NJ.",
                "zip": "17740",
                "date": "2021-06-11",
                "number": "5106",
                "total": 490.00,
                "stat": "Paid",
                "item1": "Main Cookline System Serviced; hood, duct & fan pressure washed",
                "item2": false,
                "item3": false,
                "item4": false,
                "item5": false,
                "item6": false,
                "amount1": 490.00,
                "amount2": false,
                "amount3": false,
                "amount4": false,
                "amount5": false,
                "amount6": false,
                "payDate": "2021-06-12",
                "method": "Check",
                "notes": ""
            },
            {
                "cusId": "000021",
                "name": "Chocolate Factory",
                "address1": "Munich",
                "address2": false,
                "city": "Bavaria",
                "state": "West Germany",
                "zip": false,
                "date": "2021-06-20",
                "number": "5104",
                "total": 590.00,
                "stat": "Paid",
                "item1": "Corpse of bratty teen removed from ductwork",
                "item2": false,
                "item3": false,
                "item4": false,
                "item5": false,
                "item6": false,
                "amount1": 590.00,
                "amount2": false,
                "amount3": false,
                "amount4": false,
                "amount5": false,
                "amount6": false,
                "payDate": "2021-06-30",
                "method": "Credit",
                "notes": "Unsafe work conditions, not worth the money"
            }
        ]
    },

    // [1] customers
    {
        "customers": [

            {
                "id": "000001",
                "name": "Cafe Nervosa",
                "address1": "2115 E 3rd St.",
                "address2": false,
                "city": "Ocean City",
                "state": "NJ.",
                "zip": "17740"
            },
            {
                "id": "000002",
                "name": "The Indigo Tea Shop",
                "address1": "1501 Riverwood Dr.",
                "address2": false,
                "city": "Burnsville",
                "state": "MN.",
                "zip": "55337"
            },
            {
                "id": "000003",
                "name": "Pizza Planet",
                "address1": "745 Anchor Ave.",
                "address2": false,
                "city": "Orange Cove",
                "state": "CA.",
                "zip": "93646"
            },
            {
                "id": "000004",
                "name": "Bob's Burgers",
                "address1": "115 W Ocean Dr.",
                "address2": false,
                "city": "Ocean City",
                "state": "NJ.",
                "zip": "17740"
            },
            {
                "id": "000005",
                "name": "Arnold's Drive In",
                "address1": "488 W East St.",
                "address2": "Unit # 555",
                "city": "Riverside",
                "state": "CA.",
                "zip": "93723"
            },
            {
                "id": "000006",
                "name": "Paunch Burger",
                "address1": "565 North Clinton Dr.",
                "address2": false,
                "city": "Pawnee",
                "state": "IN.",
                "zip": "56100"
            },
            {
                "id": "000007",
                "name": "Central Perk",
                "address1": "565 5th Ave.",
                "address2": false,
                "city": "New York City",
                "state": "NY.",
                "zip": "10001"
            },
            {
                "id": "000008",
                "name": "Cheer's",
                "address1": "1501 Riverwood Dr.",
                "address2": false,
                "city": "Burnsville",
                "state": "MN.",
                "zip": "55337"
            },
            {
                "id": "000009",
                "name": "Joe's Bar",
                "address1": "940 W Weed St.",
                "address2": false,
                "city": "Chicago",
                "state": "IL.",
                "zip": "60642"
            },
            {
                "id": "000010",
                "name": "Three Broomsticks",
                "address1": "100 Universal Plaza",
                "address2": false,
                "city": "Universal City",
                "state": "CA.",
                "zip": "91608"
            },
            {
                "id": "000011",
                "name": "Mos Eisley Cantina",
                "address1": "Tattoine",
                "address2": false,
                "city": "Outer Rim Territories",
                "state": "",
                "zip": ""
            },
            {
                "id": "000012",
                "name": "Krusty Crab",
                "address1": "Bikini Atoll",
                "address2": false,
                "city": "Pacific Ocean",
                "state": "",
                "zip": ""
            },
            {
                "id": "000013",
                "name": "La Ratatouille",
                "address1": "234 Main St.",
                "address2": false,
                "city": "Villanueve",
                "state": "France",
                "zip": ""
            },
            {
                "id": "000014",
                "name": "Frozen Banana",
                "address1": "565 Ocean Wharf Blvd.",
                "address2": false,
                "city": "Oceanside",
                "state": "CA.",
                "zip": "92003"
            },
            {
                "id": "000015",
                "name": "Monk's Cafe",
                "address1": "555 W. 122th St.",
                "address2": false,
                "city": "New York",
                "state": "NY.",
                "zip": "10001"
            },
            {
                "id": "000016",
                "name": "Los Pollos Hermano's",
                "address1": "9358 Eagle Ranch Rd.",
                "address2": false,
                "city": "Albuqueqe",
                "state": "NM.",
                "zip": "87114"
            },
            {
                "id": "000017",
                "name": "Whistle Stop Cafe",
                "address1": "443 Mc Cracken St.",
                "address2": false,
                "city": "Juliette",
                "state": "GA.",
                "zip": "31046"
            },
            {
                "id": "000018",
                "name": "Vesuvio",
                "address1": "91 Elizabeth Ave.",
                "address2": false,
                "city": "Elizabeth",
                "state": "NJ.",
                "zip": "07206"
            },
            {
                "id": "000019",
                "name": "The Pie Pole",
                "address1": "714 Traction Ave.",
                "address2": false,
                "city": "Los Angeles",
                "state": "CA.",
                "zip": "90013"
            },
            {
                "id": "000020",
                "name": "Louie's Italian Restaurant",
                "address1": "115 W Ocean Dr.",
                "address2": false,
                "city": "Ocean City",
                "state": "NJ.",
                "zip": "17740"
            },
            {
                "id": "000021",
                "name": "Chocolate Factory",
                "address1": "Munich",
                "address2": false,
                "city": "Bavaria",
                "state": "West Germany",
                "zip": ""

            }
        ]
    },
    {

        // [2] items
        "items": [

            {
                "id": "000001",
                "name": "Cafe Nervosa",
                "address1": "2115 E 3rd St.",
                "address2": "",
                "city": "Ocean City",
                "state": "NJ.",
                "zip": "17740"
            },
            {
                "id": "000002",
                "name": "The Indigo Tea Shop",
                "address1": "1501 Riverwood Dr.",
                "address2": "",
                "city": "Burnsville",
                "state": "MN.",
                "zip": "55337"
            },
            {
                "id": "000003",
                "name": "Pizza Planet",
                "address1": "745 Anchor Ave.",
                "address2": "",
                "city": "Orange Cove",
                "state": "CA.",
                "zip": "93646"
            },
            {
                "id": "000004",
                "name": "Bob's Burgers",
                "address1": "115 W Ocean Dr.",
                "address2": "",
                "city": "Ocean City",
                "state": "NJ.",
                "zip": "17740"
            },
            {
                "id": "000005",
                "name": "Arnold's Drive In",
                "address1": "488 W East St.",
                "address2": "",
                "city": "Riverside",
                "state": "CA.",
                "zip": "93723"
            },
            {
                "id": "000006",
                "name": "Paunch Burger",
                "address1": "565 North Clinton Dr.",
                "address2": "",
                "city": "Pawnee",
                "state": "IN.",
                "zip": "56100"
            },
            {
                "id": "000007",
                "name": "Central Perk",
                "address1": "565 5th Ave.",
                "address2": "",
                "city": "New York City",
                "state": "NY.",
                "zip": "10001"
            },
            {
                "id": "000008",
                "name": "Cheer's",
                "address1": "1501 Riverwood Dr.",
                "address2": "",
                "city": "Burnsville",
                "state": "MN.",
                "zip": "55337"
            },
            {
                "id": "000009",
                "name": "Joe's Bar",
                "address1": "940 W Weed St.",
                "address2": "",
                "city": "Chicago",
                "state": "IL.",
                "zip": "60642"
            },
            {
                "id": "000010",
                "name": "Three Broomsticks",
                "address1": "100 Universal Plaza",
                "address2": "",
                "city": "Universal City",
                "state": "CA.",
                "zip": "91608"
            },
            {
                "id": "000011",
                "name": "Mos Eisley Cantina",
                "address1": "Tattoine",
                "address2": "",
                "city": "Outer Rim Territories",
                "state": "",
                "zip": ""
            },
            {
                "id": "000012",
                "name": "Krusty Crab",
                "address1": "Bikini Atoll",
                "address2": "",
                "city": "Pacific Ocean",
                "state": "",
                "zip": ""
            },
            {
                "id": "000013",
                "name": "La Ratatouille",
                "address1": "234 Main St.",
                "address2": "",
                "city": "Villanueve",
                "state": "France",
                "zip": ""
            },
            {
                "id": "000014",
                "name": "Frozen Banana",
                "address1": "565 Ocean Wharf Blvd.",
                "address2": "",
                "city": "Oceanside",
                "state": "CA.",
                "zip": "92003"
            },
            {
                "id": "000015",
                "name": "Monk's Cafe",
                "address1": "555 W. 122th St.",
                "address2": "",
                "city": "New York",
                "state": "NY.",
                "zip": "10001"
            },
            {
                "id": "000016",
                "name": "Los Pollos Hermano's",
                "address1": "9358 Eagle Ranch Rd.",
                "address2": "",
                "city": "Albuqueqe",
                "state": "NM.",
                "zip": "87114"
            },
            {
                "id": "000017",
                "name": "Whistle Stop Cafe",
                "address1": "443 Mc Cracken St.",
                "address2": "",
                "city": "Juliette",
                "state": "GA.",
                "zip": "31046"
            },
            {
                "id": "000018",
                "name": "Vesuvio",
                "address1": "91 Elizabeth Ave.",
                "address2": "",
                "city": "Elizabeth",
                "state": "NJ.",
                "zip": "07206"
            },
            {
                "id": "000019",
                "name": "The Pie Pole",
                "address1": "714 Traction Ave.",
                "address2": "",
                "city": "Los Angeles",
                "state": "CA.",
                "zip": "90013"
            },
            {
                "id": "000020",
                "name": "Louie's Italian Restaurant",
                "address1": "115 W Ocean Dr.",
                "address2": "",
                "city": "Ocean City",
                "state": "NJ.",
                "zip": "17740"
            },
            {
                "id": "000021",
                "name": "Chocolate Factory",
                "address1": "Munich",
                "address2": "",
                "city": "Bavaria",
                "state": "West Germany",
                "zip": ""
            }
        ]
    },
    {
        // [3] expenses
        "expenses": [{
                "category": "Supplies",
                "date": "2021-09-28",
                "amount": 69.58,
                "notes": "Acme Supply Shop"
            },
            {
                "category": "Supplies",
                "date": "2021-09-02",
                "amount": 19.78,
                "notes": "Acme Supply Shop"
            },
            {
                "category": "Supplies",
                "date": "2021-06-28",
                "amount": 189.34,
                "notes": "Acme Supply Shop"
            },
            {
                "category": "Supplies",
                "date": "2021-07-22",
                "amount": 29.78,
                "notes": "Local Hardware"
            },
            {
                "category": "Supplies",
                "date": "2021-08-03",
                "amount": 107.37,
                "notes": "Local Hardware"
            },
            {
                "category": "Supplies",
                "date": "2021-06-20",
                "amount": 99.34,
                "notes": "bigriver.com"
            },
            {
                "category": "Supplies",
                "date": "2021-08-19",
                "amount": 19.78,
                "notes": "bigriver.com"
            },
            {
                "category": "Supplies",
                "date": "2021-06-13",
                "amount": 127.37,
                "notes": "bigriver.com"
            },
            {
                "category": "Fuel",
                "date": "2021-09-27",
                "amount": 11.58,
                "notes": "24/7 Pump-N-Go"
            },
            {
                "category": "Insurance",
                "date": "2021-09-26",
                "amount": 102.38,
                "notes": "Regressive"
            },
            {
                "category": "Fuel",
                "date": "2021-09-15",
                "amount": 44.37,
                "notes": "Hwy 1 Gas Station"
            },
            {
                "category": "Advertising",
                "date": "2021-09-26",
                "amount": 73.01,
                "notes": "XP Printers"
            },
            {
                "category": "Utilities & Phone",
                "date": "2021-09-21",
                "amount": 95.58,
                "notes": "Mountain Communications"
            },
            {
                "category": "Insurance",
                "date": "2021-08-26",
                "amount": 102.38,
                "notes": "Regressive"
            },
            {
                "category": "Fuel",
                "date": "2021-08-12",
                "amount": 41.58,
                "notes": "Hwy 1 Gas Station"
            },
            {
                "category": "Utilities & Phone",
                "date": "2021-08-21",
                "amount": 95.58,
                "notes": "Mountain Communications"
            },
            {
                "category": "Insurance",
                "date": "2021-07-26",
                "amount": 102.38,
                "notes": "Regressive"
            },
            {
                "category": "Fuel",
                "date": "2021-07-20",
                "amount": 11.58,
                "notes": "24/7 Pump-N-Go"
            },
            {
                "category": "Advertising",
                "date": "2021-07-25",
                "amount": 73.01,
                "notes": "XP Printers"
            },
            {
                "category": "Utilities & Phone",
                "date": "2021-07-21",
                "amount": 95.58,
                "notes": "Mountain Communications"
            },
            {
                "category": "Fuel",
                "date": "2021-07-01",
                "amount": 31.58,
                "notes": "Hwy 1 Gas Station"
            },
            {
                "category": "Insurance",
                "date": "2021-06-26",
                "amount": 102.38,
                "notes": "Regressive"
            },
            {
                "category": "Utilities & Phone",
                "date": "2021-06-21",
                "amount": 95.58,
                "notes": "Mountain Communications"
            },
            {
                "category": "Fuel",
                "date": "2021-06-20",
                "amount": 18.92,
                "notes": "24/7 Pump-N-Go"
            },
            {
                "category": "Fuel",
                "date": "2021-06-10",
                "amount": 21.76,
                "notes": "Hwy 1 Gas Station"
            },
            {
                "category": "Repairs",
                "date": "2021-08-04",
                "amount": 92.38,
                "notes": "Jimmies Industrial"
            },
            {
                "category": "Repairs",
                "date": "2021-07-06",
                "amount": 135.58,
                "notes": "Highlands Hose Supply"
            }, {
                "category": "Repairs",
                "date": "2021-08-09",
                "amount": 128.92,
                "notes": "Small Engine Supply"
            },
            {
                "category": "Travel",
                "date": "2021-06-12",
                "amount": 702.38,
                "notes": "Beach Inn"
            }, {
                "category": "Office Supplies",
                "date": "2021-08-21",
                "amount": 75.48,
                "notes": ""
            }, {
                "category": "Training",
                "date": "2021-06-01",
                "amount": 28.92,
                "notes": ""
            }, {
                "category": "Meals",
                "date": "2021-07-10",
                "amount": 21.76,
                "notes": "Golden Arches"
            }, {
                "category": "Consultant",
                "date": "2021-08-04",
                "amount": 192.38,
                "notes": "A+ Knowledge"
            }, {
                "category": "Uniforms",
                "date": "2021-07-06",
                "amount": 125.58,
                "notes": ""
            }, {
                "category": "Legal",
                "date": "2021-08-09",
                "amount": 600.92,
                "notes": ""
            }
        ]
    }
]

//Sitewide Functions and variables

function formatDate(date) {
    return `${date.charAt(5)}${date.charAt(6)}/${date.charAt(8)}${date.charAt(9)}/${date.charAt(0)}${date.charAt(1)}${date.charAt(2)}${date.charAt(3)}`;
}

function capitalizeFirstLetter(string) {
    return string.charAt(0).toUpperCase() + string.slice(1);
}


let alertVal = false;
let lastHash;

function setAlert() {
    alertVal = true;
}

function setH3(pageName) {
    let h3 = document.getElementById('siteH3');
    h3.innerText = `${pageName}`;
}

let invoicesPaidTotal = paidTotalFromDB(); //holds total amount for paid invoices (used on Overview + Invoices)
let invoicesUnpaidTotal = unPaidTotalFromDB(); //holds total amount for unpaid inoices (used on Overview + Invoices)
let expensesTotal = expenseTotalFromDB(); // holds total amount for expenses (used on Overview)
let profitTotal = invoicesPaidTotal - expensesTotal; // holds total amount for profit (used on Overveiew)
let paidPercent = Math.floor(invoicesPaidTotal / ((invoicesPaidTotal + invoicesUnpaidTotal) / 100)) + "%"; // calcualtes percentage to draw invoice bar
let unpaidPercent = Math.floor(invoicesUnpaidTotal / ((invoicesPaidTotal + invoicesUnpaidTotal) / 100)) + "%"; // calcualtes percentage to draw invoice bar
let expensesDB = getExpenses(); // Expense Data Base taken from larger db (easier to parse)
let invoicesDB = getInvoices(); // Invoices Database taken from larger db (easier to parse)
let customersDB = getCustomers();
let hashNum;


function paidTotalFromDB() { // checks invoice section of db for paid invoices and returns a total which is passed to invoicesPaidTotal above
    var counter = 0; // counter is placeholder for the amount to be returned after loop finishes

    for (var i = 0; i < db[0].invoices.length; i++) {
        let stat = db[0].invoices[i].stat;
        let total = db[0].invoices[i].total;
        if (stat === "Paid") { // loop checks each invoices for "Paid" and if so adds that invoice total to the counter
            counter += total;
        }
    }
    return counter;
}

function unPaidTotalFromDB() { // Same as documented above but for "Unpaid"
    var counter = 0;

    for (var i = 0; i < db[0].invoices.length; i++) {
        let stat = db[0].invoices[i].stat;
        let total = parseInt(db[0].invoices[i].total);
        if (stat === "Unpaid") {
            counter += total;
        }
    }
    return counter;
}

function expenseTotalFromDB() { // Same as documented above but for "expenses"
    var counter = 0;
    for (var i = 0; i < db[3].expenses.length; i++) {
        let total = parseInt(db[3].expenses[i].amount);
        counter += total;
    }
    return counter;
}

function getExpenses() { // returns expenses objects from main db (easier for a sort function to parse below) to be passed into expensesDB above
    return db[3].expenses; // expenses are at position [3]
}

function getInvoices() { // creates a new mini db of just expenses (easier for a sort function to parse below) to be passed into paymentsDB above
    return db[0].invoices; // invoices are at position [0]
}

function getCustomers() { // creates a new mini db of just expenses (easier for a sort function to parse below) to be passed into paymentsDB above
    return db[1].customers; // invoices are at position [0]
}

function formatAddressStacked(i, data) {
    let address1 = data[i].address1;
    let address2 = data[i].address2;
    let city = data[i].city;
    let state = data[i].state;
    let zip = data[i].zip;
    let address = "";

    if (address1 !== false) {
        address = `${address1} <br>`;
    }

    if (address2 !== false) {
        address = `${address}${address2} <br>`;
    }

    if (city !== false) {
        address = `${address}${city}, `;
    }

    if (state !== false) {
        address = `${address}${state} `;
    }

    if (zip !== false) {
        address = `${address}${zip}`;
    }
    return address;
}

function formatAddressLine(i, data) {
    let address1 = data[i].address1;
    let address2 = data[i].address2;
    let city = data[i].city;
    let state = data[i].state;
    let zip = data[i].zip;
    let address = "";

    if (address1 !== false) {
        address = `${address1},`;
    }

    if (address2 !== false) {
        address = `${address} ${address2},`;
    }

    if (city !== false) {
        address = `${address} ${city},`;
    }

    if (state !== false) {
        address = `${address} ${state}`;
    }

    if (zip !== false) {
        address = `${address} ${zip}`;
    }
    return address;
}

// Event Listener Hash Change

window.addEventListener('load', function () {
    alert("It's loaded!");
    buildOverview()
    location.hash = "#overview";
})

window.addEventListener("hashchange", () => {
    let newPage = location.hash.substring(1);
    previewCheck(newPage);
}, false);

function previewCheck(page) {
    if (page.length < 12) {
        killPages();
        buildPage(page);
    } else {
        killPages();
        buildPreview();
    }
}

function buildPage(page) {
    if (page === "overview") {
        buildOverview();
    } else if (page === "invoices") {
        buildInvoices();
    } else if (page === "expenses") {
        buildExpenses();
    } else if (page === "customers") {
        buildCustomers();
    } else if (page === "invoiceEdit") {
        buildInvoiceEdit();
    }
}

function buildPreview() {
    hashNum = location.hash.slice(11);
    let preview = location.hash.slice(0, 11);
    if (preview === "#previewInv") {
        buildInvoicePreview(hashNum);
    } 
}

/* function getIdFromHash() {
    return location.hash.slice(11);
}

function removeIdFromHash() {
    return location.hash.slice(0, -14);
} */

function killPages() {
    document.getElementById('plusButton').style.display = 'none';
    document.getElementById('siteContentOverview').style.display = 'none';
    document.getElementById('navOverview').className = 'off';
    document.getElementById('siteContentInvoices').style.display = 'none';
    document.getElementById('navInvoices').className = 'off';
    document.getElementById('siteContentExpenses').style.display = 'none';
    document.getElementById('navExpenses').className = 'off';
    document.getElementById('siteContentCustomers').style.display = 'none';
    document.getElementById('navCustomers').className = 'off';
    document.getElementById('modalBackground').style.display = 'none';
    document.getElementById('modalWrapper').style.width = '0px';
    document.getElementById('invoiceEdit').style.display = 'none';
}

// Overview 

function buildOverview() {
    setH3('Overview');
    document.getElementById('navOverview').className = 'active';
    document.getElementById('siteContentOverview').style.display = 'flex'; // set the Overview div to show content;
    document.getElementById('overviewPaidTotal').innerText = `${invoicesPaidTotal.toFixed(2)}`; // Invoice card total
    document.getElementById('overviewUnpaidTotal').innerText = `${invoicesUnpaidTotal.toFixed(2)}`; //Invoice card total
    document.getElementById('invoiceBarPaid').style.width = `${paidPercent}`; // Invoice card horizontal bar chart
    document.getElementById('invoiceBarUnpaid').style.width = `${unpaidPercent}`; // Invoice card horizontal bar chart
    document.getElementById('overviewPayments').innerText = `${invoicesPaidTotal.toFixed(2)}`; //Cashflow Chart total
    document.getElementById('overviewExpenses').innerText = `${expensesTotal.toFixed(2)}`; //Cashflow Chart total
    document.getElementById('overviewProfit').innerText = `${profitTotal.toFixed(2)}`; //Cashflow Chart total

    expensesCard(expensesDB); // adds data to Expense Card
    cashFlowBar();
    paymentRows();
}

function expensesCard(data) {

    function compareStrings(a, b) {
        return (a < b) ? -1 : (a > b) ? 1 : 0;
    }
    data.sort(function (a, b) {
        return compareStrings(a.category, b.category); // sorts expense data alphabetically by category 
    })

    let preCat = data[0].category; // "Starts with 0, loop starts at 1"
    let total = data[0].amount; // Amount at data.[0] is added to "total" which will be incremented in the loop and inserted each time category changes

    // First li drawn before loop.

    document.getElementById('overviewExpenseList').innerHTML = `
            <li><span class="overviewExpenseListBold" id="overview${preCat}"></span>
                                <br>
                                <span class="overviewExpenseListSmall">${preCat}</span>
                            </li>`
    counter = 0;

    for (var i = 1; i < data.length; i++) { // i starts at 1 so 'if' statement can compare category name to previous including the one above

        let cat = data[i].category;
        let amount = data[i].amount;

        if (cat === preCat) { // if same category as last, total is updated and loop repeats
            total = total + amount;
        }

        if (cat !== preCat) { // if new category, new li is drawn then ....

            document.getElementById('overviewExpenseList').innerHTML += `
            <li><span class="overviewExpenseListBold" id="overview${cat}"></span>
                                <br>
                                <span class="overviewExpenseListSmall">${cat}</span>
                            </li>`

            document.getElementById(`overview${preCat}`).innerText = total.toFixed(2); // PREVIOUS total added to its span
            total = 0; // total is reset
            total = total + amount; // amount from CURRENT category is added to total
            preCat = cat;
            counter += 1;
            if (counter > 10) {
                document.getElementById('overviewExpenseList').style.columns = '3'; // extra columns for more than 10 li
            }
        }

        document.getElementById(`overview${cat}`).innerText = total.toFixed(2); // when loop finishes, last total is added to it's span
    }
}

function cashFlowBar() {
    // Checking that payments exceeded expenses
    if (invoicesPaidTotal > expensesTotal) {
        document.getElementById('overviewBarPayments').style.height = '200px'; // Payments set to full height
        let expenseBar = expensesTotal / (invoicesPaidTotal / 200) + "px"; // Math to determine what portion of 200px is proportional
        document.getElementById('overviewBarExpenses').style.height = expenseBar;
        let profitBar = profitTotal / (invoicesPaidTotal / 200) + "px"; // Math to determine what portion of 200px is proportional
        document.getElementById('overviewBarProfit').style.height = profitBar;
    } else {
        document.getElementById('overviewBarExpenses').style.height = '200px';
        let paymentBar = invoicesPaidTotal / (expensesTotal / 200) + "px";
        document.getElementById('overviewBarPayments').style.height = paymentBar;
        document.getElementById('overviewBarProfit').style.height = '0px'; // if expenses are higher than payments, profit bar set to 0px;
    }
}

function paymentRows() {

    let data = invoicesDB;
    document.getElementById('tbodyPayments').innerHTML = "";

    function compareStrings(a, b) {
        return (a < b) ? -1 : (a > b) ? 1 : 0;
    }

    data.sort(function (a, b) {
        return compareStrings(b.payDate, a.payDate);
    })

    counter = 0;

    for (var i = 0; i < data.length; i++) {


        if (data[i].stat === "Paid" && counter < 18) { // Max of 20 rows
            var row = `<tr>
							<td class = "tdPayDate">${formatDate(data[i].payDate)}</td>
							<td class = "tdPayName">${data[i].name}</td>
							<td class= "tdPayTotal">$ ${data[i].total.toFixed(2)}</td>
					</tr>`;
            document.getElementById('tbodyPayments').innerHTML += row;
            counter += 1;
        }
    }
    var row = `<tr>
							<td class = "tdPayDate">More...</td>
					</tr>`;
    document.getElementById('tbodyPayments').innerHTML += row;
}

// Invoices

function buildInvoices() {
    setH3('Invoices');
    document.getElementById('plusButtonText').innerText = 'Invoice';
    document.getElementById('plusButton').style.display = 'block';
    document.getElementById('tbodyInvoicesPaid').innerHTML = "";
    document.getElementById('tbodyInvoicesUnpaid').innerHTML = "";
    document.getElementById('navInvoices').className = 'active';
    document.getElementById('siteContentInvoices').style.display = 'block'; // set the Invoices div to show content;
    buildRowInvoices();
    document.getElementById('totalSpanUnpaid').innerText = `$ ${invoicesUnpaidTotal.toFixed(2)}`;
    document.getElementById('totalSpanPaid').innerText = `$ ${invoicesPaidTotal.toFixed(2)}`;
}

function buildRowInvoices() {

    let data = invoicesDB;
    function compareStrings(a, b) {
        return (a < b) ? -1 : (a > b) ? 1 : 0;
    }

    data.sort(function (a, b) {
        return compareStrings(b.date, a.date);
    })

    data.sort(function (a, b) {
        if (a.date === b.date) {
            return compareStrings(b.number, a.number);
        }
    })

    for (var i = 0; i < data.length; i++) {

        let paymentStatus = data[i].stat;

        var row = `<tr>
							<td class = "tdOrder3">${formatDate(data[i].date)}
                            <a href = "#previewInv${data[i].number}"
                            class = "rowLink" ></a></td >
							<td class = "tdOrder4">${data[i].number}</td>
							<td class= "tdOrder1">${data[i].name}</td>
                            <td class= "tdOrder5">${data[i].stat}</td>
                            <td class= "tdOrder2">${data[i].total.toFixed(2)}</td>
					</tr>`;

        document.getElementById(`tbodyInvoices${paymentStatus}`).innerHTML += row;
    }
}

// Invoice Preview 


function buildInvoicePreview(number) {
    document.getElementById('previewInv').style.height = '100%';
    drawInvoice(number);
    lastHash = location.hash;
}
     function drawInvoice(invoiceNumber) {

        let data = invoicesDB;

        let i = getInvoiceLocationByNumber(invoiceNumber);

            let addressCustomer = formatAddressStacked(i, data)
            document.getElementById('invoiceAddress').innerHTML = addressCustomer;

            let name = data[i].name;
            let date = data[i].date;
            let number = data[i].number;
            let total = data[i].total;
            let stat = data[i].stat;
            let item1 = data[i].item1;
            let item2 = data[i].item2;
            let item3 = data[i].item3;
            let item4 = data[i].item4;
            let item5 = data[i].item5;
            let item6 = data[i].item6;
            let amount1 = data[i].amount1;
            let amount2 = data[i].amount2;
            let amount3 = data[i].amount3;
            let amount4 = data[i].amount4;
            let amount5 = data[i].amount5;
            let amount6 = data[i].amount6;
            
                document.getElementById('invoiceName').innerText = `${name}`;
                document.getElementById('invoiceSummaryName').innerText = `${name}`;
                document.getElementById('invoiceNum').innerText = `${number}`;
                document.getElementById('invoiceSummaryNumber').innerText = `${number}`;
                document.getElementById('invoiceDate').innerText = `${formatDate(date)}`;
                document.getElementById('invoiceSummaryDate').innerText = `${formatDate(date)}`;
                document.getElementById('invoiceSummaryTotal').innerText = `$ ${total.toFixed(2)}`;
                document.getElementById('invoiceTotal').innerText = `$ ${total.toFixed(2)}`;
                document.getElementById('invoiceSummaryStatus').innerText = `${stat}`;

                

                if (item1 !== false) {
                    document.getElementById('invoiceTableItem1').innerHTML = "";
                    document.getElementById('invoiceTableItem1').innerHTML = `${item1}`;
                } else {
                    document.getElementById('invoiceTableItem1').innerHTML = "";
                }

                if (amount1 !== false) {
                    document.getElementById('invoiceTableAmount1').innerHTML = "";
                    document.getElementById('invoiceTableAmount1').innerHTML = `$ ${amount1.toFixed(2)}`;
                } else {
                    document.getElementById('invoiceTableAmount1').innerHTML = "";
                }

                if (item2 !== false) {
                    document.getElementById('invoiceTableItem2').innerHTML = `${item2}`;
                    document.getElementById('invoiceTableItem2').innerHTML = `${item2}`;
                } else {
                    document.getElementById('invoiceTableItem2').innerHTML = "";
                }

                if (amount2 !== false) {
                    document.getElementById('invoiceTableAmount2').innerHTML = "";
                    document.getElementById('invoiceTableAmount2').innerHTML = `$ ${amount2.toFixed(2)}`;
                } else {
                    document.getElementById('invoiceTableAmount2').innerHTML = "";
                }

                if (item3 !== false) {
                    document.getElementById('invoiceTableItem3').innerHTML = "";
                    document.getElementById('invoiceTableItem3').innerHTML = `${item3}`;
                } else {
                    document.getElementById('invoiceTableItem3').innerHTML = "";
                }

                if (amount3 !== false) {
                    document.getElementById('invoiceTableAmount3').innerHTML = "";
                    document.getElementById('invoiceTableAmount3').innerHTML = `$ ${amount3.toFixed(2)}`;
                } else {
                    document.getElementById('invoiceTableAmount3').innerHTML = "";
                }

                if (item4 !== false) {
                    document.getElementById('invoiceTableItem4').innerHTML = "";
                    document.getElementById('invoiceTableItem4').innerHTML = `${item4}`;
                } else {
                    document.getElementById('invoiceTableItem4').innerHTML = "";
                }

                if (amount4 !== false) {
                    document.getElementById('invoiceTableAmount4').innerHTML = "";
                    document.getElementById('invoiceTableAmount4').innerHTML = `$ ${amount4.toFixed(2)}`;
                } else {
                    document.getElementById('invoiceTableAmount4').innerHTML = "";
                }

                if (item5 !== false) {
                    document.getElementById('invoiceTableItem5').innerHTML = "";
                    document.getElementById('invoiceTableItem5').innerHTML = `${item5}`;
                } else {
                    document.getElementById('invoiceTableItem5').innerHTML = "";
                }

                if (amount5 !== false) {
                    document.getElementById('invoiceTableAmount5').innerHTML = "";
                    document.getElementById('invoiceTableAmount5').innerHTML = `$ ${amount5.toFixed(2)}`;
                } else {
                    document.getElementById('invoiceTableAmount5').innerHTML = "";
                }

                if (item6 !== false) {
                    document.getElementById('invoiceTableItem4').innerHTML = "";
                    document.getElementById('invoiceTableItem6').innerHTML = `${item6}`;
                } else {
                    document.getElementById('invoiceTableItem6').innerHTML = "";
                }

                if (amount6 !== false) {
                    document.getElementById('invoiceTableAmount6').innerHTML = "";
                    document.getElementById('invoiceTableAmount6').innerHTML = `$ ${amount6.toFixed(2)}`;
                } else {
                    document.getElementById('invoiceTableAmount6').innerHTML = "";
                }

                
            }
    
function getInvoiceLocationByNumber(number) {

    let data = invoicesDB;
        for (var i = 0; i < data.length; i++) {
            let currentId = data[i].number;
        if (currentId === number) {
            return i;
        }
}
}

// Modals 

function cancelButton() {
        
    let buttonVal = document.getElementById('modalCancelButton').value;
     alertVal = true;   
    if (alertVal === false) {
            window.location.hash = buttonVal;
        } else {
            if (confirm("Leave without saving changes?") == true) {
                window.location.hash = buttonVal;
                alertVal = false;
            } else {}
        }
    }

// Edit Invoice

function buildInvoiceEdit() {
    document.getElementById('modalBackground').style.display = 'block';
    document.getElementById('modalWrapper').style.width = '1024px';
    document.getElementById('invoiceEdit').style.display = 'block';
    document.getElementById('modalSaveButton').value = lastHash;
    document.getElementById('modalCancelButton').value = lastHash;
}

// Expenses

function buildExpenses() {
    setH3('Expenses');
    document.getElementById('plusButtonText').innerText = 'Expense';
    document.getElementById('plusButton').style.display = 'block';
    document.getElementById('navExpenses').className = 'active';
    document.getElementById('siteContentExpenses').innerHTML = "";
    document.getElementById('siteContentExpenses').style.display = 'block';
    buildTableExpenses();
}

function getExpenseMonth(i, data) {
    let date = data[i].date;
    let monthNumber = date.charAt(5) + date.charAt(6);
    if (monthNumber === '01') {
        return "Jan"
    }
    if (monthNumber === '02') {
        return "Feb"
    }
    if (monthNumber === '03') {
        return "Mar"
    }
    if (monthNumber === '04') {
        return "Apr"
    }
    if (monthNumber === '05') {
        return "May"
    }
    if (monthNumber === '06') {
        return "June"
    }
    if (monthNumber === '07') {
        return "July"
    }
    if (monthNumber === '08') {
        return "Aug"
    }
    if (monthNumber === '09') {
        return "Sep"
    }
    if (monthNumber === '10') {
        return "Oct"
    }
    if (monthNumber === '11') {
        return "Nov"
    }
    if (monthNumber === '12') {
        return "Dec"
    }
}

function getExpenseYear(i, data) {
    let date = data[i].date;
    let year = date.charAt(0) + date.charAt(1) + date.charAt(2) + date.charAt(3);
    return year;
}


function buildTableExpenses() {

    let data = expensesDB;

    function compareStrings(a, b) {
        return (a < b) ? -1 : (a > b) ? 1 : 0;
    }

    data.sort(function (a, b) {
        return compareStrings(b.date, a.date);
    })

    data.sort(function (a, b) {
        if (a.date === b.date) {
            return compareStrings(b.amount, a.amount);
        }
    })
    

    function buildTable(i, data) {
        let month = getExpenseMonth(i, data);
        let year = getExpenseYear(i, data);
        let div =
            `<div class="contentDiv">
                <div class = "ribbon ribbonTop">
                    <span class ="expenseMonth">${month}</span><span class="expenseYear"> ${year}</span><span class ="ribbonTotal" id ="eTotal${month}${year}"></span>
                    </div>
                    <table id="tableExpenses${month}${year}">
                    <tbody id="tbodyExpenses${month}${year}" class="tbodyExpenses">
                        <tr id = "row${i}">
                            <td class="tdExpensesDate">${formatDate(data[i].date)}</td>
                            <td class="tdExpensesCategory">${data[i].category}</td> 
                            <td class="tdExpensesNotes">${data[i].notes}</td> 
                            <td class="tdExpensesAmount">$ ${data[i].amount.toFixed(2)}</td> 
                        </tr>
                    </tbody></table>               
            </div>`;
        document.getElementById('siteContentExpenses').innerHTML += div;
    }

    buildTable(0, data);

    let preMonth = getExpenseMonth(0, data);
    let preYear = getExpenseYear(0, data);
    let total = 0;
    document.getElementById(`tableExpenses${preMonth}${preYear}`).className = 'topTable';
    
    
    for (var i = 1; i < data.length; i++) { // i starts at 1 so 'if' statement can compare month name to previous including the one above

        let newYear = getExpenseYear(i, data);
        let newMonth = getExpenseMonth(i, data);
        let date = data[i].date;
        let cat = data[i].category;
        let notes = data[i].notes;
        let amount = data[i].amount;

        if (newMonth === preMonth && newYear === preYear) { // if same month as last, total is updated and loop repeats
            let row = `
                        <tr id = "row${i}">
                            <td class = "tdExpensesDate">${formatDate(date)}</td>
                            <td class = "tdExpensesCategory">${cat}</td>
                            <td class = "tdExpensesNotes">${notes}</td>
                            <td class = "tdExpensesAmount">$ ${amount.toFixed(2)}</td>
                        </tr>`
            document.getElementById(`tbodyExpenses${newMonth}${newYear}`).innerHTML += row;
            total = total + amount;
        }

        if (newMonth !== preMonth || preYear !== preYear) { // if new category, new li is drawn then ....

            buildTable(i, data);
            document.getElementById(`eTotal${preMonth}${preYear}`).innerText = `$ ${total.toFixed(2)}`; // PREVIOUS total added to its span
            total = 0; // total is reset
            total = total + amount; // amount from CURRENT category is added to total
            preMonth = newMonth;
            preYear = newYear;          
        }
        if (i % 2 !== 0) {
            document.getElementById(`row${i}`).className = 'lightgrey';
        }
    }
    document.getElementById(`eTotal${preMonth}${preYear}`).innerText = `$ ${total.toFixed(2)}`; // when loop finishes, last total is added to it's span

    
        
    
}

// Customers

function buildCustomers() {
    setH3('Customers');
    document.getElementById('plusButtonText').innerText = 'Customer';
    document.getElementById('plusButton').style.display = 'block';
    document.getElementById('navCustomers').className = 'active';
    document.getElementById('siteContentCustomers').innerHTML = "";
    document.getElementById('siteContentCustomers').style.display = 'block';
    buildTableCustomers();
}

function customerBalance(id) {
    let data = invoicesDB;
    let balance = 0;

    for (var i = 0; i < data.length; i++) {
        let cusId = data[i].cusId;
        let total = data[i].total;
        let stat = data[i].stat;
        if (id === cusId && stat === "Unpaid") {
            balance = balance + total;
        }
    }
    if (balance > 0) {
        return '$ ' + balance;
    } else {
        return '---'
    }
}

function getFirstLetter(i, data) {
    return data[i].name.charAt(0);
}


function buildTableCustomers() {

    let data = customersDB;

    function compareStrings(a, b) {
        return (a < b) ? -1 : (a > b) ? 1 : 0;
    }

    data.sort(function (a, b) {
        return compareStrings(a.name, b.name);
    })

    function buildTable(i, data) {
        let id = data[i].id;
        let name = data[i].name;
        let balance = customerBalance(id);
        let letter = getFirstLetter(i, data);
        let address = formatAddressLine(i, data);
        let div =
            `<div class="contentDiv">
                <div class = "ribbon ribbonTop">
                    <h4>${letter}</h4>
                </div>
                    <table class="tableCustomers" id="tableCustomers${letter}">
                    <tbody id="tbodyCustomers${letter}">
                    <tr id="row${i}">
                        <td>${name}</td>
                        <td>${address}</td>
                        <td> ${balance}</td>
                    </tr>
                    </tbody>
                    </table>               
            </div>`;
        document.getElementById('siteContentCustomers').innerHTML += div;
    }
    buildTable(0, data);

    let preLetter = getFirstLetter(0, data);
    let preName = data[0].name;

    document.getElementById(`tableCustomers${preLetter}`).className = 'topTable';

    for (var i = 1; i < data.length; i++) { // i starts at 1 so 'if' statement can compare month name to previous including the one above

        let id = data[i].id;
        let newName = data[i].name;
        let balance = customerBalance(id);
        let newLetter = getFirstLetter(i, data);
        let address = formatAddressLine(i, data);
        if (newLetter === preLetter && newName !== preName) { // if same month as last, total is updated and loop repeats
            let row =
                `<tr id="row${i}">
                            <td>${newName}</td>
                            <td>${address}</td>  
                            <td>${balance}</td> 
                        </tr>`
            document.getElementById(`tbodyCustomers${newLetter}`).innerHTML += row;
        }

        if (newLetter !== preLetter) { // if new category, new li is drawn then ....
            buildTable(i, data);
            preLetter = newLetter;
            preName = newName;    
        }
    }
}